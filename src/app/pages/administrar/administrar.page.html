<ion-content>
    <ion-card>
        <form [formGroup]="personaForm" (ngSubmit)="registrar()">
            <ion-input formControlName="rut" type="text" labelPlacement="stacked" label="RUT"></ion-input>
            <ion-input formControlName="usuario" type="text" labelPlacement="stacked" label="Usuario"></ion-input>
            <ion-input formControlName="email" type="email" labelPlacement="stacked" label="Email"></ion-input>
            <ion-input formControlName="contrasena" type="password" labelPlacement="stacked" label="Contraseña"></ion-input>
            <ion-input formControlName="contrasena_conf" type="password" labelPlacement="stacked" label="Confirme la Contraseña"></ion-input>
            <ion-input formControlName="fecha_nacimiento" type="date" labelPlacement="stacked" label="Fecha nacimiento"></ion-input>

            <ion-item>
                <ion-label>¿Tiene vehículo?</ion-label>
                <ion-checkbox formControlName="tieneVehiculo" (ionChange)="toggleFormulario()"></ion-checkbox>
              </ion-item>
          

        <div *ngIf="personaForm.get('tieneVehiculo')?.value">
            <ion-card>
            <ion-input formControlName="patente" type="text" labelPlacement="stacked" label="Patente"></ion-input>
            <ion-input formControlName="marca" type="text" labelPlacement="stacked" label="Marca del auto"></ion-input>
            <ion-input formControlName="modelo" type="text" labelPlacement="stacked" label="Modelo del auto"></ion-input>
            <ion-input formControlName="color" type="text" labelPlacement="stacked" label="Color del auto"></ion-input>
            </ion-card>
        </div>

        <div *ngIf="!editar">
          <ion-button [disabled]="personaForm.invalid" type="submit" size="block" color="warning">REGISTRAR</ion-button>
        </div>

          <div *ngIf="editar">
          <ion-button (click)="modificar()" size="block" color="dark">Editar</ion-button>
            </div>
          <ion-button (click)="limpiar()" size="block" color="secondary">LIMPIAR</ion-button>
        </form>
      </ion-card>

      <ion-list *ngFor="let usuario of usuarios">
        
        <ion-item-sliding>
          <ion-item-options side="start">
            <ion-item-option (click)="buscar(usuario.rut)" color="warning">Editar</ion-item-option>
          </ion-item-options>

          <ion-item>{{usuario.rut}} - {{usuario.usuario}}</ion-item>

          <ion-item-options side="end">
            <ion-item-option (click)="eliminar(usuario.rut)" color="danger">Eliminar</ion-item-option>
          </ion-item-options>
        </ion-item-sliding>

      </ion-list>

</ion-content>